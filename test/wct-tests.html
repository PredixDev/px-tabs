<!doctype html>
<html>
  <head>
      <meta charset="utf-8">
      <script src="../../webcomponentsjs/webcomponents.min.js"></script>
      <script src="../../web-component-tester/browser.js"></script>

    <!-- Step 1: import the element to test -->
    <link rel="import" href="../demo-custom-tabs.html">
    <link rel="import" href="../demo-bare-tabs.html"/>
</head>
<body>


<!-- You use the document as a place to set up your fixtures. -->
<demo-custom-tabs id="fixture-basic"></demo-custom-tabs>
<br>
<demo-bare-tabs id="mytabs-bare"></demo-bare-tabs>

<script>
  
var customTabsBasic, tabs, tsetnode, tabnode1, tabnode2, class_tab_container, class_basic_tab, isSelected, hasSelectedClass, customTabsBare, tsetnodeBare, tabnode1Bare, tabnode2Bare, class_tab_container_bare, isSelectedBare, hasSelectedClassBare;


 function initializeFields(done){
   
   // variables for fixture-basic tabs component
    customTabsBasic = Polymer.dom(document).querySelector('#fixture-basic');
    tabs = Polymer.dom(customTabsBasic.root).querySelectorAll('px-tab');
    tsetnode = Polymer.dom(customTabsBasic.root).querySelector('px-tab-set#tab-set');
    tabnode1 = Polymer.dom(customTabsBasic.root).querySelector('px-tab#tab1');
    tabnode2 = Polymer.dom(customTabsBasic.root).querySelector('px-tab#tab2');
    class_tab_container = tabnode1.parentNode.classList.contains('tabs-container__nav');
    class_basic_tab = tabnode1.childNodes[1].classList.contains('tab-title');
    isSelected = tabnode1.classList.contains('iron-selected');
    hasSelectedClass = tabnode1.childNodes[1].classList.contains('tab-title--selected');

    // variables for my-tabs-bare
    customTabsBare = Polymer.dom(document).querySelector('#mytabs-bare');
    tsetnodeBare = Polymer.dom(customTabsBare.root).querySelector('px-tab-set#tab-set-bare');
    tabnode1Bare = Polymer.dom(customTabsBare.root).querySelector('px-tab#tab1-bare'),
    tabnode2Bare = Polymer.dom(customTabsBare.root).querySelector('px-tab#tab2-bare');
    class_tab_container_bare = tabnode1Bare.parentNode.classList.contains('tabs-container__nav--bare');
    class_basic_tab_bare = tabnode1Bare.childNodes[1].classList.contains('tab-title-bare');
    isSelectedBare = tabnode1Bare.classList.contains('iron-selected');
    hasSelectedClassBare = tabnode1Bare.childNodes[1].classList.contains('tab-title-bare--selected');

    done();

  };       

describe('px-tabs', function(){

  before(function(done){
    initializeFields(done);
  });

  // basic tabs tests

   it('Basic px-tabs Tests', function() {
   

      assert(customTabsBasic != null);
      
    });

   it('Test change tab event fires', function(done) {
  
      document.addEventListener('px-tab-changed', function(evt){
        assert.equal(evt.detail.tabID, 'tab2');
        done();
      });
      tabs[1].click();
    });

   it('Test bare property for basic tabs is false', function() {

        assert.equal(tsetnode.bare , false);   
      
    });

   it('Test tab container style class does NOT include --bare', function() {
   
        assert.equal(class_tab_container , true);
      
    });

    it('Test tab style matches default class tab-title', function() {

        assert.equal(class_basic_tab , true);
      
    });

    it('Selected Tab title should include class tab-title--selected', function() {
   
      assert.equal( isSelected && hasSelectedClass , true);
      
    });

    // bare style tests

    it('Test bare tabs component gets created', function() {
   
      assert(customTabsBare != null);
      
    });

    it('Test bare property is true when bare is enabled', function() {
  
        assert.equal(tsetnodeBare.bare , true);   
      
    });

   it('Test tab container style class includes --bare', function() {
   
        assert.equal(class_tab_container_bare , true);
      
    });

    it('Test tab style class is enabled with bare tabs: tab-title-bare', function() {
  
        assert.equal(class_basic_tab_bare , true);
      
    });

    it('Test selected Tab title class includes class modifier --selected', function() {
   
      assert.equal( isSelectedBare && hasSelectedClassBare , true);
      
    });

  });
  

</script>


</body>
</html>